{% extends "users/base.html" %}
{% block body %}

<div class="mx-auto mt-10 w-full max-w-2xl">
  <h2 class="text-3xl font-semibold text-gray-700">Search Results</h2>

  {% if query %}
  <p class="mt-2 text-sm text-gray-600">
    Showing results for "<strong class="text-gray-800">{{ query }}</strong>"
  </p>
  {% endif %}

  <div class="mt-6 overflow-hidden rounded-xl bg-white shadow-md">
    {% for user in page_obj %}
    <a
      href="{% url 'users:profile' user.username %}"
      class="flex items-center justify-between border-b border-gray-100 px-5 py-4 hover:bg-gray-50"
    >
      <div class="flex items-center">
        {% if user.profile.photo %}
        <img
          src="{{ user.profile.photo.url }}"
          alt="{{ user.username }} profile image"
          class="h-12 w-12 rounded-full object-cover ring-1 ring-gray-200"
        />
        {% else %}
        <div class="h-12 w-12 rounded-full bg-gray-200 ring-1 ring-gray-200"></div>
        {% endif %}
        <span class="ml-3 text-sm font-semibold text-gray-800">{{ user.username }}</span>
      </div>
      <span class="text-xs text-gray-500">View profile</span>
    </a>
    {% empty %}
    <div class="px-5 py-8 text-sm text-gray-600">No users found.</div>
    {% endfor %}
  </div>

  {% if page_obj.paginator.num_pages > 1 %}
  <div class="mt-5 mb-10 flex items-center justify-center gap-3">
    {% if page_obj.has_previous %}
    <a
      href="?q={{ query }}&page={{ page_obj.previous_page_number }}"
      class="rounded border border-gray-300 bg-white px-3 py-1 text-sm text-gray-700 hover:bg-gray-50"
    >
      Previous
    </a>
    {% endif %}

    <span class="text-sm text-gray-600">
      Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
    </span>

    {% if page_obj.has_next %}
    <a
      href="?q={{ query }}&page={{ page_obj.next_page_number }}"
      class="rounded border border-gray-300 bg-white px-3 py-1 text-sm text-gray-700 hover:bg-gray-50"
    >
      Next
    </a>
    {% endif %}
  </div>
  {% endif %}
</div>

{% endblock body %}
