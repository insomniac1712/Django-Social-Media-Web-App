{% extends "users/base.html" %} {% load static %} {% block body %}

<div class="max-w-2xl mx-auto mt-10 bg-white shadow rounded">
  <div class="flex items-center justify-between py-4">
    <!--Feeds page-->
    <div class="px-5 py-4 text-sm">
      <a
        href="{% url 'feed:feed' %}"
        class="flex items-center gap-2 text-white hover:text-gray-500 leading-none bg-blue-500 p-2 rounded"
      >
        <img
          src="{% static 'users/images/arrow_left.png' %}"
          class="w-5 h-5"
          alt="Back"
        />
        <span>Back to Feed</span>
      </a>
    </div>

    <!--Edit and delete-->
    {% if post.user == user %}
    <div class="px-5 py-4 flex items-center gap-3 text-sm leading-none">
      <a
        href="{% url 'posts:post_edit' post.slug %}"
        class="flex items-center gap-1 text-white hover:text-gray-500 bg-blue-500 rounded p-2"
      >
        <img
          src="{% static 'users/images/edit.png' %}"
          alt="edit"
          class="w-5 h-5"
        />
        <span>Edit</span>
      </a>

      <form
        method="post"
        action="{% url 'posts:post_delete' post.slug %}"
        class="contents m-0"
      >
        {% csrf_token %}
        <button
          type="submit"
          class="flex items-center gap-1 p-0 bg-transparent text-white hover:text-gray-500 bg-red-500 p-2 rounded"
        >
          <img
            src="{% static 'users/images/delete.png' %}"
            alt="delete"
            class="w-5 h-5"
          />
          <span>Delete</span>
        </button>
      </form>
    </div>
    {% endif %}
  </div>

  <!-- User -->
  <div class="flex items-center px-5 py-4">
    <img
      src="{{ post.user.profile.photo.url }}"
      class="h-10 w-10 rounded-full"
      alt=""
    />
    <span class="ml-3 font-semibold"> {{ post.user.username }} </span>
  </div>

  <!-- Image -->
   {% if post.image %}
     <img src="{{ post.image.url }}" alt="" />
   {% endif %}



  <!-- Caption -->
  <div class="px-5 py-4">
    <h3 class="font-bold text-lg">{{ post.title }}</h3>
    <p>{{ post.caption }}</p>
  </div>

    <!-- Actions -->
  <div class="flex items-center gap-3 border-t border-gray-100 px-2 py-3 leading-none">
    {% include "posts/like_section.html" %}
    <button
      type="button"
      onclick="toggleCommentBox({{ post.id }})"
      class="m-0 inline-flex h-8 w-8 items-center justify-center rounded-full border-0 bg-transparent p-0 align-middle leading-none hover:bg-gray-100"
    >
      <img
        class="block h-5 w-5 object-contain"
        src="{% static 'users/images/comment.png' %}"
        alt="Comment"
      />
    </button>
  </div>



  {% include "posts/comment_section.html" with post=post show_comment_actions=True %}
</div>

<script>
  function toggleCommentBox(id) {
    document.getElementById(`comment-box-${id}`).classList.toggle("hidden");
  }
</script>

{% endblock %}
